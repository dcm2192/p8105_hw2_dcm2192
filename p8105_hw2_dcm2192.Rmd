---
title: "p8105_hw2_dcm2192"
author: "Dylan Morgan"
date: "2024-10-02"
output: github_document
---

```{r setup, message = FALSE}
library(tidyverse)
library(dplyr)
```

This file will include answers to the questions for HW 2. 

## Problem 1

*Load NYC transit subway data, clean up variable names, retain only select variables.*
```{r}
nyc_transit <- 
  read_csv(file = "./data_hw2/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") |> 
  janitor::clean_names() |> 
  select(line, station_name, station_latitude, station_longitude, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11, entrance_type, entry, vending, ada)
```

*Convert* `entry` *variable from character to logical.*
```{r}
nyc_transit$entry <- ifelse(nyc_transit$entry == "YES", TRUE, FALSE)
```

The `nyc_transit` dataset contains the variables `line`, `station_name`, `station_latitutde`, `station_longitude`, `route1` through `route11`, `entrance_type`, `entry`, `vending` and `ada`. Thus far, the data cleaning process has involved using the `clean_names()` function from the `janitor` package, which converted the variable names to snake_case and replaced special characters if they were present in the variable name. Other parts of the data cleaning process include using the `select()` function to keep only the variables mentioned previously, as well as using the `ifelse()` function to help convert the character data type of the `entry` variable to a logical data type, converting "YES" and "NO" to TRUE and FALSE, respectively. The `nyc_transit` dataset has `r nrow(nyc_transit)` rows and `r ncol(nyc_transit)` columns. The data is relatively tidy, but there does appear to be some redundancies in the dataset where there are multiple rows with the same data corresponding to the same precise geographic coordinates, so the dataset could be consolidated slightly. 

*Find number of distinct subway stations.*
```{r}
nyc_transit |> 
  distinct(line, station_name)
```

There are 465 distinct subway stations. 

*Find number of stations that are ADA compliant.*
```{r}
nyc_transit |> 
  filter(ada == TRUE) |> 
  distinct(line, station_name)
```

There are 84 distinct stations that are ADA compliant. 

*Find proportion of station entrances / exits without vending that allow entrance.*\

Stations without vending: 99
```{r}
nyc_transit |> 
  filter(vending == "NO") |> 
  distinct(line, station_name)
```

Stations without vending that allow entrance: 43
```{r}
nyc_transit |> 
  filter(vending == "NO", entry == TRUE) |> 
  distinct(line, station_name)
```

The proportion of station entrances/exits without vending that allow entrance is `r 43/99`. 

*Reformat data so that route number and route name are distinct variables. Find number of distinct stations that serve the A train. Of the stations that serve A train, find how many are ADA compliant.*
```{r}
nyc_transit |> 
  mutate(route8 = as.character(route8), 
         route9 = as.character(route9), 
         route10 = as.character(route10), 
         route11 = as.character(route11)) |> 
  pivot_longer(route1:route11, 
               names_to = "route_number", 
               values_to = "route_name") |> 
  filter(route_name == "A") |> 
  distinct(line, station_name)
```

There are 60 distinct stations that serve the A train. 

```{r}
nyc_transit |> 
  mutate(route8 = as.character(route8), 
         route9 = as.character(route9), 
         route10 = as.character(route10), 
         route11 = as.character(route11)) |> 
  pivot_longer(route1:route11, 
               names_to = "route_number", 
               values_to = "route_name") |> 
  filter(route_name == "A", ada == TRUE) |> 
  distinct(line, station_name)
```

Of the stations that serve the A train, 17 are ADA compliant.



